
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://notes.elrod.me/hobbies/ham-radio/portable-node/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.0.2">
    
    
      
        <title>Portable AllStarLink Node - relrod life notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.816931ca.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.9204c3b2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../../..":"../../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script>
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#portable-allstarlink-node" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="relrod life notes" class="md-header__button md-logo" aria-label="relrod life notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            relrod life notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Portable AllStarLink Node
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="relrod life notes" class="md-nav__button md-logo" aria-label="relrod life notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    relrod life notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Welcome to relrod's notebook
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Hobbies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hobbies" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hobbies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Ham Radio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ham Radio" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Ham Radio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Ham Radio (AI5A)
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Portable AllStarLink Node
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Portable AllStarLink Node
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-idea" class="md-nav__link">
    The Idea
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-construction" class="md-nav__link">
    The Construction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-ish-product" class="md-nav__link">
    Final-ish Product
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-plans" class="md-nav__link">
    Future Plans
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3">
          System
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="System" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          System
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../system/" class="md-nav__link">
        Repeaters and Nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../system/224.100MHz/" class="md-nav__link">
        224.100 MHz Repeater
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-idea" class="md-nav__link">
    The Idea
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-construction" class="md-nav__link">
    The Construction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-ish-product" class="md-nav__link">
    Final-ish Product
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-plans" class="md-nav__link">
    Future Plans
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="portable-allstarlink-node">Portable AllStarLink Node</h1>
<p>This page documents the build and operation of a portable AllStarLink node
designed by me (AI5A) originally for the Oak Hill Amateur Radio Club (N5OAK) to
use at the Belton HamExpo hamfest in 2021.</p>
<h2 id="the-idea">The Idea</h2>
<p>The idea went through several iterations and started with Kyle/KA5D suggesting
that somebody bring a portable repeater to the hamfest. Having been getting into
AllStarlink, I offered to work on it, if someone could provide the duplexer for
it.</p>
<p>Shortly after, Sean/W5SMS proposed that a simplex node would probably suffice,
with the goal of linking it back to the
<a href="https://n5oak.org/repeaters">N5OAK repeater network</a>, and allowing it to be
used, in particular, for the
<a href="https://wz5bbs.com/trivia/">Friday night trivia net</a>. This idea appealed to
me. I already set up one simplex node (the 900MHz node at my apartment), and it
went well. I already had plans to set up more and turn them into repeaters. So
this seemed like a good project.</p>
<p>So I volunteered. I took the project and ran with it.</p>
<h2 id="the-construction">The Construction</h2>
<p>I had a few things at my disposal already:</p>
<ul>
<li>A radio (Motorola PM400) that I wasn't using for anything and which had a port
  on the back that would work fine for interfacing.</li>
<li>Interface boards (ordered from
  <a href="https://technobygeorge.com/">Techno By George, LLC</a>) for experimenting.</li>
<li>Two metal 10 1/4" x 9 1/2" x 2 1/2" enclosures, one of which I was willing to
  dedicate to the project.</li>
<li>Familiarity with the configuration and administration of AllStarLink from my
  previous node.</li>
</ul>
<p>That meant I needed, at minimum:</p>
<ul>
<li>A computer to dedicate to it - originally I considered using a laptop, but I
  wanted something that would fit in the enclosure, so I with with a Raspberry
  Pi (3B+) instead.</li>
<li>A solution for power, including powering the Pi.</li>
<li>A solution for heat.</li>
<li>A solution for RF (antenna connection).</li>
<li>A solution for getting the thing online, not knowing how WiFi would be at the
  hamfest.</li>
</ul>
<p>I ordered the Raspberry Pi from Vilros. It got delayed (USPS) but ended up
showing up on time anyway. Phew.</p>
<p>For power, I realized that the radio (even on high power, which I'm not planning
to use) only drew 9A according to the specification sheet. The Pi won't draw too
much because it's not going to be under much load. And the fans will hardly draw
anything at all. So, I decided to get a
<a href="https://www.amazon.com/gp/product/B08CZKJCZ6">12.5A switching power supply</a>
from Amazon, snip the end off, and terminate it with an Anderson Power Pole
connector. The power problem was mostly solved. I still needed a way to power
the Pi, so I bought a
<a href="https://powerwerx.com/usbbuddy-powerpole-usb-converter-device-charger">USBbuddy</a>
from Powerwerx, along with a
<a href="https://powerwerx.com/4-position-powerpole-distribution-block">PD-4</a> to
distribute power to the various devices. I ran a short Power Pole pigtail out of
the enclosure through one of the punch-outs and into the PD-4, and lo and
behold, I had power. The power supply is kept outside of the enclosure (and is
optional - if 12vdc power exists nearby, it can be used instead directly into
the enclosure, otherwise the switching supply can be used from 110vac).</p>
<p>The problem of heat is something a bit harder to deal with and that I am still
keeping an eye on. The radio I'm using (PM400) has its heat sink on the bottom,
not on the back. So it is hard to cool with a fan. In any case, I bought a few
<a href="https://www.amazon.com/gp/product/B072JK9GX6">Noctua fans</a> having had good luck
with them in the past. They're nice and quiet. I have one blowing toward the
back of the radio, and one blowing out the side of the enclosure (blowing out
another punch-out hole). So far, nothing has overheated to the point of
failing.</p>
<p>Attaching an antenna to the node is done by way of a
<a href="https://www.amazon.com/gp/product/B014MCCYM8">panel mount SO239 coupler</a>, whose
connector goes through one of the punch-outs in the enclosure, and whose base is
screwed into the enclosure with two small drill holes and screws. The radio
expects a Mini UHF connector, and the easiest (and shortest) way to get there
was <a href="https://www.amazon.com/gp/product/B00COWFD6I/">PL259 to SMA</a>, then
<a href="https://www.amazon.com/gp/product/B014KQ1B0W">SMA to Mini UHF</a>. There might be
a better way, but this seemed to work well enough and let me use a small (6")
jumper easily (the PL259 to SMA).</p>
<p>Getting the thing online was another challenge, and took some research for the
cheapest, no-contract 4G option I could find. I ended up going with
Straight Talk's prepaid
<a href="https://www.straighttalk.com/plans/hotspots">hotspot plan</a>. They offered a
refurbished hotspot device for free when you first sign up, so for $15, I was
set with 2GB of 4G data. This is not a promotional post for Straight Talk, and I
have no idea how well it will do, but it's what I went with.</p>
<p>Getting everything mounted in the case was a bit of a Tetris-like puzzle, but
with some diligence, I was able to make things fit. Things are mounted in with
3M Command Strips, which in theory should be strong enough to hold things up
with the enclosure being vertical or horizontal. In my testing, I've kept it
horizontal.</p>
<p>The Pi was configured using Ansible. I will be publishing my AllStarLink Ansible
configuration in the near future as open source. This made it trivial to get the
node up and working, I had to do very little configuration myself. (I later went
back and tweaked things to make it slightly nicer to use, like shorter tails and
courtesy tones, and some custom scripting to make it announce the PL
occasionally (as a reminder to people who don't have it set).</p>
<p>Some later additions included a status script that I wrote which will make it
ping the 4G hotspot to request service level and battery level and say them over
the air. A temperature sensor was added under the radio to report the heat sink
temperature along with the Pi CPU temperature at the touch of a DTMF code. I
also subscribed to <a href="https://tailscale.com/">tailscale VPN</a> and joined the Pi to
the hosted VPN, to give myself a way to backdoor into it if needed. I can
connect to it and SSH into it from any other device on the VPN such as a phone
or laptop. So far it's worked well, and I've been really happy with the service
in my few days of testing. Another late addition was that of a DTMF matrix
keypad and some custom code to take input from it and sent it allong to
AllStarLink/asterisk.</p>
<p><img align="left" alt="Construction 1" src="/images/portable-1.jpg" width="48%" />
<img align="right" alt="Construction 2" src="/images/portable-2.jpg" width="45%" /></p>
<!-- ugh -->
<div style="clear: both"></div>
<!-- /ugh -->

<h2 id="final-ish-product">Final-ish Product</h2>
<p>Minor tweaks have taken place since this shot was taken, but it shows the mostly
finished product.</p>
<p><img alt="Final-ish product" src="/images/portable-3.jpg" /></p>
<h2 id="future-plans">Future Plans</h2>
<ul>
<li>
<p>The wiring needs to be a bit cleaner - mostly by making the wires be shorter
  than they are instead of coiling them up. This is a future enhancement.</p>
</li>
<li>
<p>Working out a better solution to the heating problem is another enhancement,
  but will require much experimentation. The heat sink being on the bottom of
  the radio makes it a hard problem to solve.</p>
</li>
<li>
<p>More fancy scripting ideas. Anything goes here - stuff useful to portable
  operations. Weather alerts?</p>
</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Ham Radio (AI5A)" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Ham Radio (AI5A)
            </div>
          </div>
        </a>
      
      
        
        <a href="../system/" class="md-footer__link md-footer__link--next" aria-label="Next: Repeaters and Nodes" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Repeaters and Nodes
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.01824240.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ff0eccb3.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js"></script>
      
        <script src="../../../javascripts/tables.js"></script>
      
    
  </body>
</html>